
<!-- Page content-->
<div class="container">
    <div class="row">

      <div>
        <%= form_for articles_path, :method => 'get' do %>
          <p>
            <%= text_field_tag :search, params[:search] %>
            <%= submit_tag "Find article", :name => nil, class: "btn btn-success me-1" %>
          </p>
        <% end %>
      </div>

      <%= will_paginate @articles, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
        <!-- Blog entries-->
        <div class="col-lg-8">
          <h3>All articles</h3>
            <div class="row">
              <% @articles.each do |article| %>
                <div class="col-lg-6">
                    <!-- Blog post-->
                    <div class="card mb-4">
                      <% if article.picture? %>
                        <%= image_tag(article.picture.url, height: "350px", class: "card-img-top") %>
                      <% else %>
                        <%= image_tag "unknown.png", height: "350px", class: "card-img-top" %>
                      <% end %>
                        <div class="card-body">
                            <div class="small text-muted"><em>Create <%= article.created_at.strftime("%d.%m.%Y") %></em></div>
                            <h2 class="card-title h4"><%= article.title %></h2>
                            <p class="card-text"><%= article.content.first(150) %></p>
                            <%= link_to "Read full article â†’", article_path(article.id), class: "btn btn-primary" %>
                            <div class="art-author"><b>Author:</b> <em><%= link_to (article.user.nickname), user_path(article.user.id) %></em></div>
                              <% if can? :destroy, article %>
                            <%= link_to "Delete this article", article_path(article.id), method: :delete, class: "btn btn-danger" %>
                            <%= link_to "Edit article", edit_article_path(article.id), class: "btn btn-info" %>
                              <% end %>
                        </div>
                        <div class="votingBtn">
                             <span class="voteCount my-vote">Rating: <b><%= article.get_likes.count %></b></span>
                        </div>
                      </div>
                    </div>
                    <% end %>
             </div>
            </div>

            <div class="col-lg-4">
                <!-- Categories widget-->
                <div class="card mb-4">
                    <div class="card-header">Categories</div>
                    <%= render 'layouts/categories' %>
                </div>

                <%= render 'layouts/top_articles' %>

                <!-- Side widget-->
                <div class="card mb-4">
                    <div class="card-header">Side Widget</div>
                    <div class="card-body"> <%= render 'layouts/sinoptik' %> </div>
                </div>
            </div>
        </div>
    </div>
